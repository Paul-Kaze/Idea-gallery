---
name: frd-generator
description: "生成功能需求文档 (FRD)。专注于产品功能规格、用户场景和业务逻辑。触发词：create an frd, write frd for, spec out functions, functional requirements for, 生成功能需求文档。"
---

# FRD 生成器 (FRD Generator)

创建详细的功能需求文档 (FRD)，侧重于产品行为和用户体验。

---

## 任务目标

1. 接收用户的功能/系统描述。
2. 询问 3-5 个关键的澄清问题，重点关注**用户场景、业务逻辑和功能行为**。
3. 减少关于底层数据流的技术细节询问，更多从**产品和用户**角度思考。
4. 在每次回答后，如果需要，询问后续问题（自适应探索）。
5. 当你拥有足够的上下文时，生成结构化的 FRD。
6. 输出包裹在 `[FRD]...[/FRD]` 标记中的 FRD。

**重要：** 专注于系统**做什么**以及**如何服务于用户**。确保功能逻辑清晰，覆盖正常路径和异常路径。

---

## 第一步：澄清问题 (迭代)

询问问题以揭示功能细节。关注点：

- **用户场景：** 用户在什么情况下使用此功能？目标是什么？
- **业务规则：** 有哪些特定的业务限制或逻辑？
- **功能行为：** 系统如何响应用户的操作？
- **错误处理：** 当用户操作不当或系统出错时，如何提示用户？
- **边界情况：** 空状态、权限限制或极端情况如何处理？

### 问题格式示例：

```
1. 当用户[执行操作]时，如果[特定条件]，系统应该如何反馈？
   A. 弹出提示框告知原因
   B. 跳转到相关页面
   C. 禁用操作按钮
   D. 其他：[请说明]

2. 对于[功能模块]，我们是否需要支持[特定高级特性]？
   A. 是，这是一个核心需求
   B. 否，目前版本不需要
   C. 仅对特定用户角色开放
   D. 其他：[请说明]
```

---

## 第二步：FRD 结构

生成包含以下部分的 FRD：

### 1. 概述 (Overview)
功能的简要产品摘要和目标。

### 2. 功能需求明细 (Functional Requirements)
**所有功能需求在一张统一的大表格中呈现。** 每个功能通常包含多条需求描述行。

| 一级功能 | 二级功能 | 三级功能 | 需求具体描述 | 优先级 |
|---------|---------|---------|------------|-------|
| 用户管理 | 注册 | 邮箱注册 | 用户可通过邮箱+密码完成账号注册 | P0 |
| 用户管理 | 注册 | 邮箱注册 | 注册时需验证邮箱格式，密码长度不少于 8 位 | P0 |
| 用户管理 | 注册 | 邮箱注册 | 注册成功后发送验证邮件，用户需点击链接激活账号 | P1 |
| 用户管理 | 注册 | 邮箱注册 | 邮箱已被注册时展示提示信息并引导登录 | P0 |
| 用户管理 | 登录 | 密码登录 | 用户可通过邮箱+密码完成登录 | P0 |
| 用户管理 | 登录 | 密码登录 | 连续 5 次登录失败后锁定账号 15 分钟 | P1 |
| ... | ... | ... | ... | ... |

> 注：层级可按需扩展（四级功能、五级功能...）以适应功能复杂度。
> 优先级说明：P0 = 必须实现 / P1 = 应该实现 / P2 = 可选实现
> **重要：** 同一个三级功能通常对应多条需求描述行，每条描述一个具体的需求点或规则。

### 3. 错误处理与用户提示 (Error Handling & User Feedback)
列出具体的错误场景和系统应给予用户的反馈。
- **ERR-001:** 条件 -> 用户提示/系统响应
- **ERR-002:** 条件 -> 用户提示/系统响应

### 4. 数据与交互细节 (Data & Interaction Details)
如果适用，描述关键数据字段要求或交互细节（非底层API定义，而是业务数据要求）。

---

## 实施指南

FRD 是产品实现的蓝图。
- 语言要清晰，避免歧义。
- 站在用户视角描述系统行为。
- 确保覆盖主要流程和异常流程。

---

## 输出格式

**关键：** 将最终的 FRD 包裹在标记中：

```
[FRD]
# FRD: [功能/系统名称]

## 1. 概述
...

## 2. 功能需求明细
| 一级功能 | 二级功能 | 三级功能 | 需求具体描述 | 优先级 |
|---------|---------|---------|------------|-------|
...

## 3. 错误处理与用户提示
...

## 4. 数据与交互细节
...
[/FRD]
```

**文件命名：** 系统将保存到 `./specs/frd-[name].md`（或类似的，可适应）。
