# [Vibe 产品需求文档] AI 图片画廊

# [Vibe 产品需求文档]

## 一、网站基础信息

1. 网站名称：AI 图片画廊（AI Image Gallery）

2. 核心目标：展示各类 AI 生成图片，支持用户查看图片详情及下载原图；

## 二、核心功能模块

### （一）首页布局

1. 顶部导航栏

a. 布局规则：固定在页面顶部，采用左右分布结构

b. 左侧区域：展示网站 Logo

c. 右侧区域：用户登录/状态入口

ⅰ. 未登录状态：显示“登录”按钮

- 点击该按钮将弹出登录弹窗，仅支持谷歌账号登录。

ⅱ. 已登录状态：显示用户头像

- 点击头像将弹出下拉菜单（符合网站极简设计风格），仅显示“退出登录”按钮。

- 普通用户：仅显示“退出登录”按钮

- 点击“退出登录”将切换至未登录状态

### （二）首页图片展示规则

1. 布局方式：采用瀑布流布局，可自动适配不同屏幕尺寸，图片排列紧凑，无过多留白。

2. 缩略图要求：每张图片以缩略图形式呈现，保持原始宽高比，不拉伸、不变形。

3. 加载机制：实现懒加载功能；优先加载首屏图片，用户滚动至可视区域时再加载对应图片。

4. 加载状态提示：

a. 加载中：显示占位符（模糊低清预览图或加载动画）

b. 加载失败：显示“加载失败，点击重试”按钮

### （三）图片详情弹窗

1. 触发逻辑：用户点击图片缩略图时弹出弹窗；页面底层添加半透明遮罩（禁止滚动）；弹窗先加载图片占位符，避免出现空白。

2. 弹窗结构

a. 左侧：图片展示区（固定尺寸，图片自适应展示区，显示高清原图）

b. 右侧：信息+操作区

ⅰ. 上方信息区

- 模型信息：标注为“模型：XXX”（示例：模型：Gemini 3 Pro）

- 提示词信息：标注为“提示词：”+完整提示词；内容过长时支持折叠/展开（由用户点击控制）

- 参考图参数：若后端图片数据包含参考图参数，则显示此项（标注为“参考图：”）；参数下方展示对应参考图缩略图（支持多张参考图）。鼠标悬浮在参考图缩略图上时，缩略图下方弹出悬浮窗显示对应图片；鼠标移开后悬浮窗消失。

ⅱ. 下方操作区：

- 仅保留“下载”按钮；点击即可直接下载原图

1. 关闭逻辑：

a. 点击背景半透明遮罩可关闭弹窗

b. 关闭后页面底层恢复滚动功能。

## 三、后端逻辑

### 1. 数据存储

1. 图片文件存储

- AI 生成原图与自动生成的缩略图分开存储；支持常见图片格式（JPG、PNG、WebP 等）。

- 采用分布式文件存储或云存储服务（如 AWS S3、阿里云 OSS），确保数据可靠性与可扩展性。

- 在数据库中记录每张图片的存储路径、文件大小、格式及访问链接，便于快速检索。

1. 图片元数据存储

- 建立专属数据库表存储图片相关信息，包括：图片唯一 ID（主键）、AI 模型名称、生成提示词、参考图 ID（多张参考图时用逗号分隔）、上传时间、关联用户 ID（针对登录用户上传的图片）。

- 参考图信息存储在独立关联表中，包括参考图 ID、存储路径、访问链接及对应目标图片 ID（与主图片表通过外键关联）。

- 存储通过谷歌账号认证获取的用户基础信息，包括用户 ID（唯一标识）、用户名、头像链接、登录状态过期时间。

### 2. API 接口设计

1. 图片列表获取接口

- 请求方式：GET

- 请求参数：页码（默认值 1）、每页图片数量（默认值 20）、屏幕尺寸（可选，用于自适应缩略图尺寸）。

- 返回内容：

- 普通用户：图片元数据列表（含图片 ID、缩略图链接、AI 模型名称）、图片总数、是否有下一页（用于支持懒加载）。

1. 图片详情获取接口

- 请求方式：GET

- 请求参数：图片 ID（必填）。

- 返回内容：完整图片元数据（模型名称、完整提示词、上传时间）、原图链接、参考图列表（含参考图缩略图链接及原图链接，仅当存在参考图参数时返回）。

1. 图片下载接口

- 请求方式：GET

- 请求参数：图片 ID（必填）、图片类型（原图/缩略图，默认值为原图）。

- 返回内容：图片文件流（支持浏览器直接下载）。

1. 用户认证接口

- 请求方式：POST

- 请求参数：谷歌账号认证令牌（由前端获取）。

- 返回内容：用户认证结果（成功/失败）；认证成功时返回用户信息（ID、姓名、头像链接）及临时登录令牌（有效期 24 小时）。

### 3. 数据处理逻辑

1. 图片处理

- 接收 AI 生成图片及其元数据后，通过图片处理库自动生成缩略图（尺寸为 800*等比例大小），并将原图与缩略图存储至对应存储区域。

- 对于含参考图参数的图片，通过参考图 ID 建立参考图与目标图片的关联，并验证参考图有效性（文件是否存在、格式是否支持）。

1. 数据验证

- 接收图片元数据时验证完整性：必填字段（图片 ID、AI 模型名称、提示词）不可为空；验证图片文件格式及大小（拒绝超过 50MB 的文件）。

- 用户登录时验证谷歌认证令牌有效性，拒绝无效或过期令牌。

1. 性能优化

- 通过 CDN 实现图片链接缓存，提升前端图片加载速度（尤其针对缩略图及参考图）。

- 在数据库中为图片 ID、用户 ID、上传时间字段建立索引，优化图片列表及详情接口的查询效率。

### 4. 安全与可靠性

1. 访问控制

- 图片下载及详情接口无需用户登录，但用户信息关联功能（如后续扩展）仅支持已认证用户。

- 限制 API 请求频率（如普通接口每 IP 每分钟 100 次请求），防止恶意请求。

1. 数据备份

- 对图片文件及数据库数据执行每日增量备份，每周全量备份，防止数据丢失。

- 设置文件存储容错机制（如多区域备份），确保单个存储节点故障时图片仍可正常访问。

## 四、设计风格

### 1. 核心设计原则

• 以图片为核心：将 AI 生成图片作为视觉核心，减少冗余装饰，通过简洁布局突出图片细节。

### 2. 首页设计风格

#### 顶部导航栏

- 风格：简洁扁平，无厚重装饰效果；滚动时灵活调整显示状态，避免遮挡图片同时确保可操作性。

- Logo：简洁易识别，配色与网站整体色调统一；尺寸适中，不突兀。

- “登录”按钮/头像：“登录”按钮简洁易识别；头像以规则形状展示，hover 时提供明显交互反馈。

#### 核心内容区（瀑布流布局）

- 图片间距：图片间保持均匀合理间距，实现紧凑且不拥挤的布局效果。

- 加载占位符：使用与目标图片宽高比匹配的占位符，搭配简洁加载提示，避免空白造成的困惑。

### 3. 图片详情弹窗设计风格

#### 弹窗框架

- 整体风格：造型简洁，与背景区分明显（如添加适当阴影），符合网站整体风格。

- 遮罩层：采用半透明遮罩弱化背景，引导用户注意力聚焦至弹窗内容。

#### 左侧图片展示区

- 采用中性背景衬托图片，确保色彩真实呈现；展示区边界清晰，避免与其他区域混淆。

#### 右侧信息+操作区

- 布局：整齐有序，信息模块间距清晰，确保良好可读性。

- 文本风格：层级清晰（如标签加粗、内容常规），字体大小与颜色舒适，不刺眼。

- 参考图缩略图：与首页图片卡片风格一致，尺寸与间距统一，hover 时提供明显交互反馈。

- 参考图悬浮窗：风格简洁，图片展示清晰，鼠标移开后快速隐藏，避免干扰操作。

### 4. 视觉规范

• 色彩体系：为核心交互元素（如下载按钮）设定主色调，与整体色调协调；背景、文本、辅助元素采用一套协调的中性色，确保视觉和谐与可读性。

• 字体体系：选用易读字体，确保多平台显示一致；明确区分不同文本层级（如页面标题、内容文本），形成清晰视觉层级。

• 图标风格：功能提示采用简洁直观的图标，与网站极简风格一致。
> （注：文档部分内容可能由 AI 生成）